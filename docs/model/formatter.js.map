{"version":3,"file":"formatter.js","names":["DeviationIndicator","formatValue","value","parseFloat","toFixed","error","formatRank","rank","formatIndicator","pastRank","isNaN","Up","Down","None","formatPastRankTooltip","resourceBundle","getView","getModel","getResourceBundle","getText","isPresent","containsNpmPackages","allItem","some","item","type","formatHighlight","string","highlight","start","toLowerCase","indexOf","end","length","slice","containsDockerImages","containsPypiPackages","containsCodeRepositories","formatUpdatedAtIcon","updatedAt","currentDate","Date","updatedAtDate","timeDiff","Math","abs","getTime","diffYears","formatUpdatedAtState"],"sources":["../../src/model/formatter.ts"],"sourcesContent":["import { DeviationIndicator } from \"sap/m/library\";\n\nexport default {\n\t/**\n\t * Rounds the currency value to 2 digits\n\t *\n\t * @public\n\t * @param {string} value value to be formatted\n\t * @returns {string} formatted currency value with 2 digits\n\t */\n\tformatValue(value: string): string {\n\t\tif (!value) {\n\t\t\treturn \"\";\n\t\t}\n\t\ttry {\n\t\t\treturn parseFloat(value).toFixed(2);\n\t\t} catch (error) {\n\t\t\treturn value;\n\t\t}\n\t},\n\n\tformatRank(rank: number): number {\n\t\treturn +rank + 1;\n\t},\n\n\tformatIndicator(rank: number, pastRank: number): DeviationIndicator {\n\t\tif (rank < pastRank || isNaN(pastRank)) {\n\t\t\treturn DeviationIndicator.Up;\n\t\t}\n\t\tif (rank > pastRank) {\n\t\t\treturn DeviationIndicator.Down;\n\t\t}\n\t\treturn DeviationIndicator.None;\n\t},\n\n\tformatPastRankTooltip(pastRank: number): string {\n\t\tconst resourceBundle = this.getView().getModel(\"i18n\").getResourceBundle();\n\t\tif (isNaN(pastRank)) {\n\t\t\treturn resourceBundle.getText(\"noPrevListing\");\n\t\t}\n\t\treturn resourceBundle.getText(\"prevListing\", [+pastRank + 1]);\n\t},\n\n\tisPresent(value: string): boolean {\n\t\treturn !!value;\n\t},\n\n\tcontainsNpmPackages(allItem: Array<any>): boolean {\n\t\treturn (\n\t\t\tallItem &&\n\t\t\tallItem.some(function (item) {\n\t\t\t\treturn item.type === \"npm-package\";\n\t\t\t})\n\t\t);\n\t},\n\n\tformatHighlight(string: string, highlight: string): string {\n\t\tif (!string) {\n\t\t\treturn \"\";\n\t\t}\n\t\tif (!highlight) {\n\t\t\treturn string;\n\t\t}\n\t\tconst start = string.toLowerCase().indexOf(highlight.toLowerCase());\n\t\tif (start >= 0) {\n\t\t\tconst end = start + highlight.length;\n\t\t\treturn `${string.slice(0, start)}<em>${string.slice(start, end)}</em>${string.slice(end)}`;\n\t\t}\n\t\treturn string;\n\t},\n\n\tcontainsDockerImages(allItem: Array<any>): boolean {\n\t\treturn (\n\t\t\tallItem &&\n\t\t\tallItem.some(function (item) {\n\t\t\t\treturn item.type === \"docker-image\";\n\t\t\t})\n\t\t);\n\t},\n\n\tcontainsPypiPackages(allItem: Array<any>): boolean {\n\t\treturn (\n\t\t\tallItem &&\n\t\t\tallItem.some(function (item) {\n\t\t\t\treturn item.type === \"pypi-package\";\n\t\t\t})\n\t\t);\n\t},\n\n\tcontainsCodeRepositories(allItem: Array<any>): boolean {\n\t\treturn (\n\t\t\tallItem &&\n\t\t\tallItem.some(function (item) {\n\t\t\t\treturn item.type === \"code-repository\";\n\t\t\t})\n\t\t);\n\t},\n\n\tformatUpdatedAtIcon(updatedAt: string): string {\n\t\t// calculate the time difference in years between the current date and updatedAt\n\t\tconst currentDate = new Date();\n\t\tconst updatedAtDate = new Date(updatedAt);\n\t\tconst timeDiff = Math.abs(currentDate.getTime() - updatedAtDate.getTime());\n\t\tconst diffYears = timeDiff / (1000 * 3600 * 24 * 365);\n\t\tif (diffYears < 1) {\n\t\t\treturn \"\";\n\t\t}\n\t\tif (diffYears >= 1 && diffYears < 2) {\n\t\t\treturn \"sap-icon://warning\";\n\t\t}\n\t\tif (diffYears >= 2) {\n\t\t\treturn \"sap-icon://error\";\n\t\t}\n\t},\n\tformatUpdatedAtState(updatedAt: string): string {\n\t\t// calculate the time difference in years between the current date and updatedAt\n\t\tconst currentDate = new Date();\n\t\tconst updatedAtDate = new Date(updatedAt);\n\t\tconst timeDiff = Math.abs(currentDate.getTime() - updatedAtDate.getTime());\n\t\tconst diffYears = timeDiff / (1000 * 3600 * 24 * 365);\n\t\tif (diffYears < 1) {\n\t\t\treturn \"None\";\n\t\t}\n\t\tif (diffYears >= 1 && diffYears < 2) {\n\t\t\treturn \"Warning\";\n\t\t}\n\t\tif (diffYears >= 2) {\n\t\t\treturn \"Error\";\n\t\t}\n\t},\n};\n"],"mappings":"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"}