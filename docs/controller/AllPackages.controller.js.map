{"version":3,"file":"AllPackages.controller.js","names":["AppController","AllPackages","onInit","getRouter","getRoute","attachPatternMatched","onPatternMatched","event","getView","getModel","setProperty","search","getProperty","token","queryControl","applySearchFilter","onAfterRendering","binding","byId","getBinding","oSorter","Sorter","path","descending","sort","onPress","objectName","getSource","getBindingContext","getObject","name","navTo","onSortSelectChange","selectKeySort","getParameter","getKey","selectKeySortArray","split","selectKey","selectDescending","liveSearch","value","trim","getHashChanger","getHash","onUpdateToken"],"sources":["../../src/controller/AllPackages.controller.ts"],"sourcesContent":["import AppController from \"./App.controller\";\nimport Sorter from \"sap/ui/model/Sorter\";\nimport Event from \"sap/ui/base/Event\";\n\n/**\n * @namespace org.openui5.bestofui5.controller\n */\nexport default class AllPackages extends AppController {\n\tpublic onInit(): void {\n\t\tsuper.onInit();\n\t\tthis.getRouter().getRoute(\"allPackages\").attachPatternMatched(this.onPatternMatched, this);\n\t}\n\n\tpublic onPatternMatched(event: Event): void {\n\t\tthis.getView().getModel(\"settings\").setProperty(\"/headerKey\", \"allPackages\");\n\t\tconst search = this.getView().getModel(\"settings\").getProperty(\"/search\");\n\t\tconst token = this.getView().getModel(\"settings\").getProperty(\"/tokens\");\n\t\tthis.queryControl.applySearchFilter();\n\t}\n\n\tpublic onAfterRendering(): void {\n\t\tconst binding = this.getView().byId(\"listAllPackages\").getBinding(\"items\");\n\t\tconst oSorter = new Sorter({\n\t\t\tpath: \"downloads365\",\n\t\t\tdescending: true,\n\t\t});\n\t\tbinding.sort(oSorter);\n\t}\n\n\tpublic onPress(event: Event): void {\n\t\t// get object name from oevent\n\t\tconst objectName = event.getSource().getBindingContext(\"data\").getObject().name;\n\t\t//route to object view\n\t\tthis.navTo(\"RouteObjectView\", {\n\t\t\tname: objectName,\n\t\t});\n\t}\n\n\tpublic onSortSelectChange(event: Event): void {\n\t\tconst selectKeySort: string = event.getParameter(\"selectedItem\").getKey();\n\t\tconst selectKeySortArray = selectKeySort.split(\":\");\n\t\tconst selectKey = selectKeySortArray[0];\n\t\tthis.getView().getModel(\"settings\").setProperty(\"/selectKey\", selectKey);\n\t\tconst selectDescending = selectKeySortArray[1] === \"true\";\n\t\tconst binding = this.getView().byId(\"listAllPackages\").getBinding(\"items\");\n\t\tconst oSorter = new Sorter({\n\t\t\tpath: selectKey,\n\t\t\tdescending: selectDescending,\n\t\t});\n\t\tbinding.sort(oSorter);\n\t}\n\n\tpublic liveSearch(event: Event): void {\n\t\tconst value = event.getParameter(\"value\").trim();\n\t\tthis.getView().getModel(\"settings\").setProperty(\"/search\", value);\n\t\tif (this.getRouter().getHashChanger().getHash() != \"packages\") {\n\t\t\tthis.getView().getModel(\"settings\").setProperty(\"/headerKey\", \"allPackages\");\n\t\t\tthis.navTo(\"allPackages\");\n\t\t} else {\n\t\t\tthis.onPatternMatched();\n\t\t}\n\t}\n\n\tpublic onUpdateToken(event: Event): void {\n\t\tthis.queryControl.onUpdateToken(event);\n\t\tif (this.getRouter().getHashChanger().getHash() != \"packages\") {\n\t\t\tthis.getView().getModel(\"settings\").setProperty(\"/headerKey\", \"allPackages\");\n\t\t\tthis.navTo(\"allPackages\");\n\t\t} else {\n\t\t\tthis.onPatternMatched();\n\t\t}\n\t}\n}\n"],"mappings":"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"}