{"version":3,"file":"BarChart.js","names":["Chart","registerables","BarChart","Control","renderer","apiVersion","render","rm","chart","openStart","style","getColor","class","openEnd","getId","close","metadata","properties","title","color","aggregations","records","type","defaultAggregation","constructor","id","settings","_getChartData","aRecords","getRecords","labels","map","record","getLabel","datasets","label","getTitle","backgroundColor","borderColor","data","getValue","onAfterRendering","_chart","register","getDomRef","options","responsive","animation","scales","x","display","update"],"sources":["../../src/control/BarChart.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport Control from \"sap/ui/core/Control\";\n// https://www.chartjs.org/docs/latest/getting-started/integration.html#bundlers-webpack-rollup-etc\nimport { Chart, registerables } from \"chart.js\";\nimport RenderManager from \"sap/ui/core/RenderManager\";\n\n/**\n * @name org.openui5.bestofui5.control.BarChart\n */\nexport default class BarChart extends Control {\n\tprivate _chart: Chart;\n\t// The following three lines were generated and should remain as-is to make TypeScript aware of the constructor signatures\n\tconstructor(idOrSettings?: string | $BarChartSettings);\n\tconstructor(id?: string, settings?: $BarChartSettings);\n\tconstructor(id?: string, settings?: $BarChartSettings) {\n\t\tsuper(id, settings);\n\t}\n\n\tstatic readonly metadata = {\n\t\tproperties: {\n\t\t\ttitle: \"string\",\n\t\t\tcolor: \"sap.ui.core.CSSColor\",\n\t\t},\n\t\taggregations: {\n\t\t\trecords: {\n\t\t\t\ttype: \"org.openui5.bestofui5.control.ChartRecord\",\n\t\t\t},\n\t\t},\n\t\tdefaultAggregation: \"records\",\n\t};\n\n\tstatic renderer = {\n\t\tapiVersion: 2,\n\t\trender: (rm: RenderManager, chart: BarChart) => {\n\t\t\trm.openStart(\"div\", chart);\n\t\t\trm.style(\"color\", chart.getColor());\n\t\t\trm.class(\"chartPadding\");\n\t\t\trm.openEnd();\n\n\t\t\trm.openStart(\"canvas\", chart.getId() + \"-canvas\");\n\t\t\trm.openEnd();\n\t\t\trm.close(\"canvas\");\n\n\t\t\trm.close(\"div\");\n\t\t},\n\t};\n\n\t_getChartData() {\n\t\tconst aRecords = this.getRecords();\n\t\treturn {\n\t\t\tlabels: aRecords.map((record) => {\n\t\t\t\treturn record.getLabel();\n\t\t\t}),\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tlabel: this.getTitle(),\n\t\t\t\t\tbackgroundColor: this.getColor(),\n\t\t\t\t\tborderColor: this.getColor(),\n\t\t\t\t\tdata: aRecords.map((record) => {\n\t\t\t\t\t\treturn record.getValue();\n\t\t\t\t\t}),\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tonAfterRendering() {\n\t\tif (!this._chart) {\n\t\t\tChart.register(...registerables);\n\t\t\tthis._chart = new Chart(this.getDomRef(\"canvas\") as HTMLCanvasElement, {\n\t\t\t\ttype: \"bar\",\n\t\t\t\tdata: this._getChartData(),\n\t\t\t\toptions: {\n\t\t\t\t\tresponsive: true,\n\t\t\t\t\tanimation: false,\n\t\t\t\t\tscales: {\n\t\t\t\t\t\tx: {\n\t\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\tthis._chart.data = this._getChartData();\n\t\t\tthis._chart.update();\n\t\t}\n\t}\n}\n"],"mappings":";;;EAGA;QACSA,K;QAAOC,a;;EAGhB;AACA;AACA;QACqBC,Q,GAAiBC,O;IAsB9BC,Q,EAAW;MACjBC,UAAU,EAAE,CADK;MAEjBC,MAAM,EAAE,CAACC,EAAD,EAAoBC,KAApB,KAAwC;QAC/CD,EAAE,CAACE,SAAH,CAAa,KAAb,EAAoBD,KAApB;QACAD,EAAE,CAACG,KAAH,CAAS,OAAT,EAAkBF,KAAK,CAACG,QAAN,EAAlB;QACAJ,EAAE,CAACK,KAAH,CAAS,cAAT;QACAL,EAAE,CAACM,OAAH;QAEAN,EAAE,CAACE,SAAH,CAAa,QAAb,EAAuBD,KAAK,CAACM,KAAN,KAAgB,SAAvC;QACAP,EAAE,CAACM,OAAH;QACAN,EAAE,CAACQ,KAAH,CAAS,QAAT;QAEAR,EAAE,CAACQ,KAAH,CAAS,KAAT;MACA;IAbgB,C;IAbFC,Q,EAAW;MAC1BC,UAAU,EAAE;QACXC,KAAK,EAAE,QADI;QAEXC,KAAK,EAAE;MAFI,CADc;MAK1BC,YAAY,EAAE;QACbC,OAAO,EAAE;UACRC,IAAI,EAAE;QADE;MADI,CALY;MAU1BC,kBAAkB,EAAE;IAVM,C;IAJ3BC,W,wBAAYC,E,EAAaC,Q,EAA8B;MACtD,yCAAMD,EAAN,EAAUC,QAAV;IACA,C;IA+BDC,a,2BAAgB;MACf,MAAMC,QAAQ,GAAG,KAAKC,UAAL,EAAjB;MACA,OAAO;QACNC,MAAM,EAAEF,QAAQ,CAACG,GAAT,CAAcC,MAAD,IAAY;UAChC,OAAOA,MAAM,CAACC,QAAP,EAAP;QACA,CAFO,CADF;QAINC,QAAQ,EAAE,CACT;UACCC,KAAK,EAAE,KAAKC,QAAL,EADR;UAECC,eAAe,EAAE,KAAK1B,QAAL,EAFlB;UAGC2B,WAAW,EAAE,KAAK3B,QAAL,EAHd;UAIC4B,IAAI,EAAEX,QAAQ,CAACG,GAAT,CAAcC,MAAD,IAAY;YAC9B,OAAOA,MAAM,CAACQ,QAAP,EAAP;UACA,CAFK;QAJP,CADS;MAJJ,CAAP;IAeA,C;IAEDC,gB,+BAAmB;MAClB,IAAI,CAAC,KAAKC,MAAV,EAAkB;QACjB1C,KAAK,CAAC2C,QAAN,CAAe,GAAG1C,aAAlB;QACA,KAAKyC,MAAL,GAAc,IAAI1C,KAAJ,CAAU,KAAK4C,SAAL,CAAe,QAAf,CAAV,EAAyD;UACtEtB,IAAI,EAAE,KADgE;UAEtEiB,IAAI,EAAE,KAAKZ,aAAL,EAFgE;UAGtEkB,OAAO,EAAE;YACRC,UAAU,EAAE,IADJ;YAERC,SAAS,EAAE,KAFH;YAGRC,MAAM,EAAE;cACPC,CAAC,EAAE;gBACFC,OAAO,EAAE;cADP;YADI;UAHA;QAH6D,CAAzD,CAAd;MAaA,CAfD,MAeO;QACN,KAAKR,MAAL,CAAYH,IAAZ,GAAmB,KAAKZ,aAAL,EAAnB;;QACA,KAAKe,MAAL,CAAYS,MAAZ;MACA;IACD;;SA7EmBjD,Q"}